# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

# This file defines the metrics that are recorded by the Glean SDK.
# APIs to use these pings are automatically generated at build time using
# the `glean_parser` PyPI package.

# Metrics in this file may make use of SDK reserved ping names. See
# https://mozilla.github.io/glean/book/dev/core/internal/reserved-ping-names.html
# for additional information.

---
$schema: moz://mozilla.org/schemas/glean/metrics/2-0-0

rally:
  id:
    type: uuid
    lifetime: user
    send_in_pings:
      - study-enrollment
      - deletion-request
      - study-initialization
      - ballot-interaction
      - notice-interaction
      - modal-interaction
      - serp-visit
      - online-service-navigation
    description: |
      The id of the Rally client. This is generated by
      the Rally SDKs. A value of 00000000-0000-0000-0000-000000000000
      indicates a test payload. A value of 11111111-1111-1111-1111-111111111111
      indicates that the Rally id was not found or properly set.
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never


study_initialization:
  condition_type:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  survey_id:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  default_search_engine:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  ask_query_count:
    type: quantity
    unit: queries
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  baidu_query_count:
    type: quantity
    unit: queries
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  bing_query_count:
    type: quantity
    unit: queries
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  duckduckgo_query_count:
    type: quantity
    unit: queries
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  ecosia_query_count:
    type: quantity
    unit: queries
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  google_query_count:
    type: quantity
    unit: queries
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  yahoo_query_count:
    type: quantity
    unit: queries
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  yandex_query_count:
    type: quantity
    unit: queries
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  history_age:
    type: quantity
    unit: milliseconds
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  enrollment_time:
    type: datetime
    time_unit: millisecond
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  ping_time:
    type: datetime
    time_unit: millisecond
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

ballot_interaction:
  old_search_engine:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  new_search_engine:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  see_more_selected:
    type: boolean
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  ballot_ordering:
    type: string_list
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  details_expanded:
    type: string_list
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  attempts:
    type: quantity
    unit: attempts
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
    no_lint:
      - UNIT_IN_NAME
  treatment_times:
    type: string_list
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  dwell_times:
    type: string_list
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  attention_durations:
    type: string_list
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  treatment_completion_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the treatment was completed.
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  ping_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the data submission ping was generated.
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

notice_interaction:
  attention_duration:
    type: quantity
    unit: milliseconds
    description: |
      How long the user attention event occurred
      (window/tab was focused and not idle).
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  dwell_time:
    type: quantity
    unit: milliseconds
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  revert_selected:
    type: boolean
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  old_search_engine:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  new_search_engine:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  treatment_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the treatment was applied.
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  treatment_completion_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the treatment was completed.
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  ping_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the data submission ping was generated.
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

modal_interaction:
  revert_selected:
    type: boolean
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - modal-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  treatment_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the modal dialog was presented to the participant.
    lifetime: ping
    send_in_pings:
      - modal-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  ping_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the data submission ping was generated.
    lifetime: ping
    send_in_pings:
      - modal-interaction
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

serp_visit:
  search_engine:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  query_vertical:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  page_loaded:
    type: boolean
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  attention_duration:
    type: quantity
    unit: milliseconds
    description: |
      How long the user attention event occurred
      (window/tab was focused and not idle).
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  dwell_time:
    type: quantity
    unit: milliseconds
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  page_number:
    type: quantity
    unit: page
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  attribution:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  attribution_id:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  transition:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  organic_details:
    type: event
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
    extra_keys:
      result_top_height:
        description: The number of pixels between the top of the page and
          the top of the organic result.
        type: quantity
      result_bottom_height:
        description: The number of pixels between the top of the page and
          the bottom of the organic result.
        type: quantity
      result_page_num:
        description: The page number that the organic result was on
          (only collected for DuckDuckGo SERPs, because they present
          results as one continuously scrolling page)
        type: quantity
      result_online_service:
        description: TODO
        type: string

  organic_clicks:
    type: event
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
    extra_keys:
      result_ranking:
        description: The ranking of the organic result.
        type: quantity
      attention_duration_upon_click:
        description: The attention duration when the selection occurred.
        type: quantity
      page_loaded_upon_selection:
        description: Whether the SERP completed loading when the
          selection occurred.
        type: boolean

  num_ads:
    type: quantity
    unit: pages
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  num_ad_clicks:
    type: quantity
    unit: clicks
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
    no_lint:
      - UNIT_IN_NAME

  self_preferenced_details:
    type: event
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
    extra_keys:
      result_top_height:
        description: The number of pixels between the top of the page and
          the top of the self preferenced result.
        type: quantity
      result_bottom_height:
        description: The number of pixels between the top of the page and
          the bottom of the self preferenced result.
        type: quantity
      self_preferenced_result_type:
        description: The type of self-preferenced result that is on the page
          (flights, hotels, other travel, maps, lyrics, weather, shopping,
          or other direct answer).
        type: string

  num_self_preferenced_clicks:
    type: quantity
    unit: clicks
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
    no_lint:
      - UNIT_IN_NAME

  num_internal_clicks:
    type: quantity
    unit: clicks
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
    no_lint:
      - UNIT_IN_NAME

  search_area_top_height:
    type: quantity
    unit: pixels
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  search_area_bottom_height:
    type: quantity
    unit: pixels
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  time_since_same_query:
    type: quantity
    unit: milliseconds
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  page_visit_start_time:
    type: datetime
    time_unit: millisecond
    description: |
      When did the page visit start.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  ping_time:
    type: datetime
    time_unit: millisecond
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  current_default_engine:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  navigational_query:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

  modification_type:
    type: string
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never

online_service_navigation:
  online_service_data:
    type: event
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - online-service-navigation
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
    extra_keys:
      service_name:
        description: TODO
        type: string
      attention_time:
        description: TODO
        type: quantity
      dwell_time:
        description: TODO
        type: quantity
      page_visit_count:
        description: TODO
        type: quantity
      completed_transaction_count:
        description: TODO
        type: quantity
  aggregation_period_start_time:
    type: datetime
    time_unit: millisecond
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - online-service-navigation
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
  ping_time:
    type: datetime
    time_unit: millisecond
    description: |
      TODO
    lifetime: ping
    send_in_pings:
      - online-service-navigation
    bugs:
      - TODO
    data_reviews:
      - TODO
    notification_emails:
      - than@mozilla.com
    expires: never
